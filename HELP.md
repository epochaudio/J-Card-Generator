# 磁带封面生成器 (J-Card Genesis) 使用帮助

欢迎使用磁带封面生成器！本工具专为实体音乐爱好者设计，帮助你快速生成专业级的 J-Card 磁带封面。

## 1. 快速开始

### 获取 API Key (必填)
本应用使用阿里云 DashScope (通义千问 & 通义万相) 提供 AI 服务。
1.  访问 [阿里云百炼控制台](https://bailian.console.aliyun.com/?apiKey=1&tab=api#/api)。
2.  登录并开通服务。
3.  复制你的 API Key (以 `sk-` 开头)。
4.  在软件右上角点击 **设置 (齿轮图标)**，将 Key 粘贴到输入框中并点击 "完成"。

### 基础流程
1.  **输入信息**:
    *   **智能导入**: 强烈推荐使用 `粘贴文本` 功能。支持从网易云、Spotify、MusicBrainz 或自行整理的文本中一键导入。 AI 会自动识别并补全专辑信息。   
    *   **MusicBrainz 搜索**: 点击 "MusicBrainz 搜索"，输入专辑名查找，自动填充信息。


    > **⚠️ 注意事项 (Note)**
    > *   **不推荐单轨详细编辑**: 本工具专注于专辑整体视觉生成，不建议在 UI 上对单首曲目进行逐项修改    。
    > *   **推荐工作流**: 若需调整歌单，**建议先让 AI 整理好完整文本**，再通过 **"粘贴文本"** 一键导入。

    *   点击右上角的 **"AI 风格与备注"** 按钮（现已升级为 **AI 创意总监** 模式）。
    *   **自动重塑**: AI 将化身为您的创意总监，一键补全专辑的基础信息（标题、配色、听感备注）。
        *   **[NEW] 精细化生成**:
            *   **封面标语 (Slogan)**: 点击输入框右侧的 **✨ 魔法棒** 按钮。AI 会根据曲目生成 1-3 句短诗/题记（<20字/句），风格含蓄、私密，绝无营销感。
            *   **图片提示词 (Prompt)**: 点击 "AI 图片提示词" 旁边的 **"AI 生成提示词"** 按钮。AI 会分析曲风，并强制从 A(水彩)/B(90s杂志)/C(手绘日记)/D(平面设计) 中选择一种最匹配的画风，生成不含摄影词汇的插画描述。
    *   **视觉策划**: 生成提示词后，您可以手动微调，然后点击下方的 **"AI 生成封面"** 获得最终图像。
3.  **生成封面**:
    *   在 "样式覆盖" 区域，点击 **"生成封面"**。AI 将根据专辑标题和风格生成一张 1024x1024 的艺术封面（生成需等待约 1 分钟）。
    *   或者上传/拖入你自己的图片（暂未开放拖拽，目前仅支持 AI 生成或手动修改代码加载）。
4.  **调整布局**:
    *   在 "布局选项" 中切换 "标准 / 古典 / 合辑" 模式。
    *   勾选 "极简脊部" 或 "强制大写" 微调视觉效果。
5.  **导出**:
    *   点击右上角的 **"导出 SVG"** (矢量打印) 或 **"导出 PNG"** (预览分享)。
    *   **SVG 优势**: 矢量格式，无限放大不失真，文字边缘锐利，适合高质量打印。

## 2. 功能详解 (Feature Guide)

### 2.1 顶部工具栏 (Toolbar)
*   **新建/重置 (Reset)**: 点击顶部的 `旋转箭头 (Rotate)` 图标，可以一键清空当前的专辑信息（标题、曲目、封面），但**保留**您的 API Key、录音设备列表和音源设置以及主题偏好。适合快速开始制作下一张磁带。
*   **主题切换 (Themes)**: 顶部新增分段选择器 `[ Dark | Light | Cover | Color ]`，一键切换 J-Card 的视觉风格。应用UI保持为浅色模式。
*   **字体风格 (Fonts)**: 顶部栏可以直接切换 4 种字体系统：`Moderno (现代)`, `Analog (复古)`, `Handwritten (手写)`, `Digital (数码)`。

### 2.2 核心输入区 (Input Panel)
*   **布局选项 (Layout)**:
    *   **布局模式**:
        *   `标准 (Standard)`: 适合大多数流行、摇滚专辑。
        *   `古典 (Classical)`: 专为古典乐设计。会自动归类乐章（如 "Symphony No.5: I. Allegro"），并在背面展示更详细的录音技术规格 (Tech Specs)。
        *   `合辑 (Compilation)`: 适合 "群星" 专辑，会在每首歌后单独显示演唱者名字。
    *   **脊部备注 (Spine Notes)**: `Note Upper` 显示在脊部(Spine)最上方（通常填年份，如 "2024"），`Note Lower` 显示在脊部最下方（通常填格式，如 "STEREO"）。
*   **自定义元数据 (Custom Metadata)**:
    *   **Recording Equipment**: 记录您的录音卡座、线材等设备信息。**支持多行文本**，且会自动保存，下次打开无需重新输入。
    *   **Media Source**: 记录音源格式（如 "Vinyl", "SACD", "Streaming"）。**自动保存**。
    *   **Tape Rec. Date**: 记录转录磁带的日期，默认为当天 (YYYY-MM-DD)，可手动修改。

### 2.3 封面与样式 (Cover & Style)
*   **封面获取**:
    *   **上传图片**: 点击 `上传 (Upload)` 按钮选择本地图片（推荐 1:1 正方形）。
    *   **AI 生成**: 输入提示词，点击 `AI 生成`。
*   **零裁剪 (Full Fit)**: 无论图片比例如何，系统都会尽量完整展示图片内容，并使用高斯模糊填充剩余空白，杜绝白边。

### 2.4 曲目管理 (Tracklist)
*   **智能导入 (Smart Import)**: 强烈推荐使用 `粘贴文本` 功能。支持从网易云、Spotify、MusicBrainz 或自行整理的文本中一键导入，网络搜索好曲目时间信息，同时导入，体验最佳。
*   

## 3. 常见问题 (FAQ)

**Q: 为什么生成图片很慢？**
A: 使用的高清图像模型 (Wanx 2.5) 需要较多计算资源，通常需要 30-60 秒。请耐心等待。

**Q: 生成的图片不满意怎么办？**
A: 您可以在 "AI 图片提示词" 框中手动修改提示词，描述更具体的画面（例如 "赛博朋克风格，霓虹雨夜"），然后再次点击 "生成封面"。

**Q: MusicBrainz 搜索不到图片或曲目时间不对？**
A:
*   **图片缺失**: 可能是因为网络问题（封面存档服务器连接不稳）或者该专辑在 MusicBrainz 数据库中本身就没有上传封面。
*   **时间数据**: 曲目时长直接取自 MusicBrainz 数据库，A/B 面分割是根据总时长自动计算的。
*   **补救办法**: 建议在网络上搜索包含时间的曲目列表文本（如 Discogs/Amazon），复制后使用 **"粘贴文本"** 功能导入。这是最快修正数据的方法。

**Q: 如何打印？**
A: 推荐导出 PNG 格式，使用 Adobe Illustrator 或浏览器打开打印。标准 J-Card 尺寸已预设好。

## 4. 打印与规格说明

### 推荐打印设备：Canon SELPHY CP1500
本工具生成的图片比例完美适配佳能炫飞 (SELPHY) 系列打印机的 6 寸相纸。
*   **相纸规格**: 6 寸 (4R / 4x6 英寸)
*   **实际尺寸 (无边距)**: 约 **100 x 148 mm**
*   **使用建议**: 导出 PNG 后，直接使用手机或电脑连接 CP1500 打印即可，无需裁剪，即打即用。

### J-Card 布局说明 (四折页 / U-Card 风格)
本生成器采用的是扩展型的 J-Card 布局（也称 U-Card 风格），包含以下部分：
1.  **封面 (Front)**: 磁带盒正面的正方形区域。
2.  **脊部 (Spine)**: 侧面的长条区域，显示专辑名和编号。
3.  **封底 (Back)**: 脊部另一侧的折叠页，通常包含 A 面曲目。
4.  **扩展页 (Extension)**: 额外的折叠面板，用于容纳 B 面曲目、详细制作人员名单或歌词。
*   **总展开效果**: 打印并折叠后，可以完美包裹磁带盒，不仅提供更多信息展示空间，也比普通 J-Card 更具收藏质感。

---

---

### 版本 v1.2.7 更新说明 (Update Log)
#### 1. 离线字体引擎 (Offline Typography Engine)
*   **全本地化 (Fully Localized)**: 彻底移除了对 Google Fonts/Loli 等在线字体服务的依赖。Modern, Analog, Handwritten, Digital 四大主题的 100% 字体资源（含中文兜底）均已内置于安装包中。
*   **导出无忧 (Robust Export)**: 针对 PNG 导出开发了全新的 `ExportService`。现在，导出的图片会强制内嵌当前主题所需的字体文件 (Base64 Embedding)，彻底解决了“预览正常、导出后字体丢失”的顽疾，且完全无需联网。
*   **手写体升级**: Handwritten 主题引入了 **Rock Salt** (马克笔标题) + **Shadows Into Light** (圆珠笔正文) + **霞鹜文楷** (中文) 的黄金组合，手写质感大幅提升。

### 版本 v1.2.6 更新说明 (Update Log)
#### 1. 前封面排版和谐化 (Front Panel Harmony)
*   **动态垂直居中 (Dynamic Vertical Centering)**: 废弃了基于固定像素的机械布局。现在的排版引擎会自动计算封面底部到页脚之间的剩余空间，并将“专辑名+标语”作为整体完美居中放置。
*   **视觉编组**: 显著缩减了专辑名与标语之间的间距（固定为 32px），强化了主副标题的亲密感，消除了此前“标题贴着封面、标语却离得很远”的视觉割裂感。
*   **底部锚定**: 优化了底部艺术家名字的定位逻辑，确保整体版式的稳重与统一。

### 版本 v1.2.5 更新说明 (Update Log)
#### 1. 字体与排版系统 (Typography System)
*   **四重奏风格**: 提供 `Moderno (现代)`, `Analog (复古)`, `Handwritten (手写)`, `Digital (数码)` 四种种截然不同的字体组合。
*   **国内加速**: 全线切换至国内镜像源，解决字体加载失效问题。
*   **所见即所得**: 顶部工具栏新增字体切换开关，实时预览变化。

### 版本 v1.2.4 更新说明 (Update Log)

#### 1. 全新主题系统 (Theme System)
*   **4种风格**:
    *   **🌑 Dark (深色)**: 经典配置，深灰底白字。
    *   **☀️ Light (浅色)**: 纯白底黑字，适合极简风格或省墨打印。
    *   **🖼️ Cover (封面)**: 将封面图高斯模糊后作为背景，营造沉浸感。
    *   **🎨 Color (取色)**: 自动提取封面的主色调作为背景色，并根据 YIQ 算法自动判断使用黑色或白色文字，以确保可读性。
*   **字体风格 (Font Themes)**:
    *   **Moderno**: 现代极简风格，使用 Oswald (标题) + Inter (正文) + JetBrains Mono (代码)，适合大多数专辑。
    *   **Analog**: 复古机械风格，使用 Bebas Neue (标题) + Roboto (正文) + Courier Prime (打字机)，营造模拟磁带的年代感。
    *   **Handwritten**: 独立手写风格，使用 Patrick Hand (标题) + Kalam (笔触)，适合 Demo 或 Lo-Fi 音乐。
    *   **Digital**: 赛博数码风格，使用 Orbitron (科幻) + Share Tech Mono (终端)，适合电子乐或 Synthwave。
*   **交互升级**: 顶部栏新增 macOS 风格的分段控制器 (Segmented Control)，所见即所得。

#### 2. UI 优化
*   **界面解耦**: APP 操作界面固定为清爽的浅色模式，不再受磁带主题影响，操作体验更一致。

---

### 版本 v1.2.3 更新说明 (Update Log)

#### 1. 脊部排版重构 (Spine Layout Refactor)
*   **智能堆叠布局**: 彻底修复了脊部 (Spine) 上“目录编号”与“顶部备注”、“艺术家”与“底部备注”之间的文字重叠问题。
*   **双区自适应**: 采用 Top/Bottom 双区锚定策略，文字过长时自动向内延伸，不再互相挤压，确保视觉整洁。

#### 2. 版权与许可 (License)
*   **明确非商用协议**: 在软件内及文档中增加了详细的版权声明，明确本软件仅供个人非商业用途使用。

---

### 版本 v1.2.1 更新说明 (Update Log) - AI Creative Director

#### 1. AI 颗粒度控制 (Granular AI Control)
*   **功能拆分**: 将原本的“一键打包生成”拆分为更灵活的独立功能。
*   **✨ (Magic Wand) 文案生成**: 在“封面标语”栏新增按钮。
    *   **约束**: 严格限制 1-3 句，单句 <20 字。
    *   **风格**: 强制为“私密日记/短诗”，严禁出现“震撼/必听”等营销词。
*   **🎨 图片提示词生成**: 在“样式覆盖”区域新增按钮。
    *   **画风锁定**: AI 会先分析情绪，然后**必选**一种画风：A) 水彩/梦境, B) 90s杂志/复古, C) 手绘日记/孤独, D) 平面/极简。
    *   **落地**: 生成的 Prompt 包含具体的场景、光线和质感描述，并自动附带 Negative Prompt 以排除照片写实感。

---

### 版本 v1.2.0 更新说明 (Update Log)

#### 1. 档案级元数据 (Archival Metadata)
*   **Media Source (音源)**: 新增字段，用于记录录音源（如 Vinyl, SACD, Streaming）。支持持久化保存。
*   **Recording Date (录制日期)**: 新增字段，默认抓取当天日期，记录磁带制作的具体时间。
*   **Tech Specs 布局升级**: 古典模式 (Classical Compact) 下采用全新的三段式布局（左：音源/厂牌，中：设备，右：时间线），更显专业。

#### 2. 工作流优化 (Workflow)
*   **一键重置 (New Project)**: 顶部新增重置按钮（旋转图标），可快速清空当前专辑信息开启新项目，同时保留您的硬件设置。
*   **手动封面上传 (Manual Upload)**: 侧边栏新增“上传图片”按钮，支持直接选择本地图片作为封面，并自动适配主题色。
*   **设备字段升级**: 录音设备 (Equipment) 输入框升级为多行文本域，支持更长的设备清单。

---

### 版本 v1.1.5 更新说明 (Update Log)

#### 1. 核心布局与视觉 (Layout & Visuals)
*   **封面零裁剪 (Zero Crop / Borderless)**: 主封面图片采用 **Full Fit** 模式（`scale(1)` 无缩放），确保图片完整撑满正方形区域，消除四周人为缝隙，视觉冲击力更强。同时保留了底层的高斯模糊背景（110% 缩放）以填充因比例差异产生的空白。
*   **透明度调整**: 文字区域的背景遮罩不透明度从 85% 降低至 **75%**，配合深色模式更加通透。
*   **古典模式优化**:
    *   **Short Back (内折页)**: 显示“硬核”录音元数据 (Label, Equipment, Mode, Released)。
    *   **封底 (Back)**: 显示纯净的曲目列表（无序号）。
*   **脊部 (Spine)**:
    *   新增 **Artist** 高亮显示。
    *   布局调整：Note Upper (如年份) 移至顶部，Note Lower (如 STEREO) 移至底部。

#### 2. 内容显示优化 (Content)
*   **曲目列表**: 在标准模式 (Standard) 下，右侧大面板不再重复显示单曲艺术家名字（仅在合辑模式显示），更加简洁。
*   **Footer**: 更新版本号至 v1.1.5，新增 QQ 群链接。

#### 3. 功能逻辑 (Logic)
*   **AI 提示词**: 初始化默认为空，避免误生成。若为空点击生成会弹出提示。
*   **打印校准**: 修复了 J-Card 物理尺寸换算微差。

#### 4. 构建发布 (Build)
*   已生成适配 **macOS (ARM64/Intel)** 和 **Windows (x64)** 的安装包。

*获取更多帮助或反馈，请联系开发者。*

---

## 5. 版权与许可声明 (Copyright & License)

**© 2025 门耳朵 (Epoch Audio). 保留所有权利。**

本软件为开源软件，允许个人在**非商业目的**下免费使用、学习与研究。

### 🚫 禁止商业用途
**禁止任何形式的商业化用途**，包括但不限于：
1.  售卖软件本体、安装包或激活服务。
2.  以本软件提供有偿服务（如有偿打印、代处理数据、代制作封面）。
3.  付费下载、会员专享、积分兑换等变相收费。
4.  植入广告、引流、分成等变现行为。
5.  用于企业、网店或实体门店的经营场景。

### ✅ 关于转载与二次开发
允许在**非商业目的**下转载、镜像、分享、二次开发或再发布，但必须遵守以下条件：
1.  **完整保留**本声明与原作者署名。
2.  **不得收费**或设置任何付费门槛（如关注后下载）。
3.  不得暗示获得原作者的背书或授权。
4.  不得植入任何广告、恶意代码或追踪程序。

*本软件按“现状”提供，作者不对使用本软件产生的任何后果承担责任。商业授权请另行取得书面许可。*
